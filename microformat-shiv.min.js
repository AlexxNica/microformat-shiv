/*
   microformat-shiv - v0.3.4
   Built: 2015-07-07 02:07 - http://microformat-shiv.com
   Copyright (c) 2015 Glenn Jones
   Licensed MIT 
*/



var Microformats;!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Microformats=b()}(this,function(){function a(a,b){b.maps&&(Array.isArray(b.maps)?a.add(b.maps):a.add([b.maps]))}var b={};b.version="0.3.4",b.livingStandard="2015-07-02T20:30:44Z",b.Parser=function(){this.rootPrefix="h-",this.propertyPrefixes=["p-","dt-","u-","e-"]},b.maps=b.maps?b.maps:{},b.rels=b.rels?b.rels:{},b.Parser.prototype={init:function(){this.rootNode=null,this.document=null,this.options={baseUrl:"",filters:[],textFormat:"whitespacetrimmed",dateFormat:"auto"},this.rootID=0,this.errors=[]},get:function(a){var b,c={},d=[];if(this.init(),this.hasDOMContext(a)){if(this.options.filters.length>0){var e=this.findFilterNodes(this.rootNode,this.options.filters);d=this.walkRoot(e)}else d=this.walkRoot(this.rootNode);c.items=d,this.findRels&&(b=this.findRels(this.rootNode),c.rels=b.rels,c["rel-urls"]=b["rel-urls"],b.alternate&&(c.alternates=b.alternate)),this.clearUpDom(this.rootNode)}return this.errors.length>0?this.formatError():c},hasDOMContext:function(a){var c,d;if(this.mergeOptions(a),a.node&&(this.rootNode=a.node,9===this.rootNode.nodeType?(this.document=this.rootNode,this.rootNode=b.domUtils.querySelector(this.rootNode,"html")):this.document=b.domUtils.ownerDocument(this.rootNode)),!this.rootNode&&document&&(this.rootNode=b.domUtils.querySelector(document,"html"),this.document=document),this.rootNode&&this.document){!a.baseUrl&&this.document&&this.document.location&&(this.options.baseUrl=this.document.location.href),c=b.domUtils.querySelector(this.document,"base"),c&&(d=b.domUtils.getAttribute(c,"href"),d&&(this.options.baseUrl=d));var e=b.domUtils.getNodePath(this.rootNode),f=b.domUtils.cloneDocument(this.document);this.document=f,this.rootNode=b.domUtils.getNodeByPath(this.document,e),this.addIncludes&&this.addIncludes(this.document)}else this.errors.push("No options.node was provided and no global document object could be found.");return this.rootNode&&this.document},formatError:function(){return{items:[],rels:{},"rel-urls":{},errors:this.errors}},add:function(a){a.forEach(function(a){a&&a.root&&a.name&&a.properties&&(b.maps[a.name]=JSON.parse(JSON.stringify(a)))})},findFilterNodes:function(a,c){var d=this.document.createElement("div"),e=this.findRootNodes(a),f=0,g=0,h=0;if(e)for(f=e.length;f>g;){for(h=c.length;h--;)if(this.getMapping(c[h])){var i=this.getMapping(c[h]).root;c.push(i)}for(h=c.length;h--;)if(b.domUtils.hasAttributeValue(e[g],"class",c[h])){var j=b.domUtils.clone(e[g]);b.domUtils.appendChild(d,j);break}g++}return d},count:function(a){function c(a,b){h[a]?h[a]=h[a]+b:h[a]=b}var d,e,f,g,h={};if(!a||!a.node)return{errors:["No options.node to parser microformats from"]};for(d=this.findRootNodes(a.node),g=d.length;g--;)for(e=b.domUtils.getAttributeList(d[g],"class"),f=e.length;f--;){b.utils.startWith(e[f],"h-")&&c(e[f],1);for(var i in b.maps)b.maps[i].root===e[f]&&-1===e.indexOf(i)&&c(i,1)}return h},isMicroformat:function(a){var b;return a?(b=this.getUfClassNames(a),b.root.length>0):!1},shouldInclude:function(a,c){var d;if(b.utils.isArray(c)&&c.length>0){for(d=c.length;d--;)if(a.type[0]===c[d])return!0;return!1}return!0},findChildItems:function(a,c){var d,e,f,g,h,i=[],j=[];if(d=this.findRootNodes(a,!0),d.length>0)for(f=d.length,e=0;f>e;){var k=this.getUfClassNames(d[e],c);if(k.root.length>0&&0===k.properties.length)for(j=this.walkTree(d[e],!0),h=j.length,g=0;h>g;)j[g]&&b.utils.hasProperties(j[g].properties)&&i.push(j[g]),g++;e++}return i},findRootNodes:function(a,c){var d,e,f,g,h,i=null,j=[],k=[];for(h in b.maps)b.maps.hasOwnProperty(h)&&k.push(b.maps[h].root);for(c=c?c:!1,i=c?b.domUtils.getNodesByAttribute(a,"class"):b.domUtils.getNodesByAttribute(a,"class"),e=0,f=i.length;f>e;){for(d=b.domUtils.getAttributeList(i[e],"class"),g=d.length;g--;){if(k.indexOf(d[g])>-1){j.push(i[e]);break}if(b.utils.startWith(d[g],"h-")){j.push(i[e]);break}}e++}return j},walkRoot:function(a){var b,c=this,d=[],e=[];if(b=this.getUfClassNames(a),b&&b.root.length>0)d=this.walkTree(a),d.length>0&&(e=e.concat(d));else if(a&&a.children&&a.children.length>0&&this.findRootNodes(a,!0).length>-1)for(var f=0;f<a.children.length;f++){var g=a.children[f];d=c.walkRoot(g),d.length>0&&(e=e.concat(d))}return e},walkTree:function(a){var b,c,d,e=[];return b=this.getUfClassNames(a),b&&b.root.length&&b.root.length>0&&(this.rootID++,d=this.rootID,c=this.createUfObject(b.root),this.walkChildren(a,c,b.root,d,b),this.impliedRules&&this.impliedRules(a,c,b),e.push(c)),e},walkChildren:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p=this;for(m=0,n=a.children.length;n>m;){o=a.children[m];var q=p.getUfClassNames(o,d);if(q.root.length>0&&q.properties.length>0&&!o.addedAsRoot){for(g=p.createUfObject(q.root,b.text.parse(this.document,o,p.options.textFormat)),f&&1===f.root.length&&1===f.properties.length&&p.impliedValueRule&&(c=p.impliedValueRule(c,f.properties[0],q.properties[0],i)),j=p.removePropPrefix(q.properties[0]),c.properties[j]?c.properties[j].push(g):c.properties[j]=[g],p.rootID++,o.addedAsRoot=!0,l=0,k=g.type.length,h=p.rootID;k>l;)p.walkChildren(o,g,g.type,h,q),l++;this.impliedRules&&p.impliedRules(o,g,q)}if(0===q.root.length&&q.properties.length>0){for(l=0,k=q.properties.length;k>l;)i=p.getValue(o,q.properties[l],c),j=p.removePropPrefix(q.properties[l]),f&&1===f.root.length&&1===f.properties.length&&p.impliedValueRule&&(c=p.impliedValueRule(c,f.properties[0],q.properties[l],i)),""===i||p.hasRootID(o,e,j)||(c.properties[j]?c.properties[j].push(i):c.properties[j]=[i],p.appendRootID(o,e,j)),l++;p.walkChildren(o,c,d,e,q)}if(0===q.root.length&&0===q.properties.length&&p.walkChildren(o,c,d,e,q),q.root.length>0&&0===q.properties.length){for(g=p.createUfObject(q.root,b.text.parse(this.document,o,p.options.textFormat)),c.children||(c.children=[]),p.hasRootID(o,e,"child-root")||(c.children.push(g),p.appendRootID(o,e,"child-root"),p.rootID++),l=0,k=g.type.length,h=p.rootID;k>l;)p.walkChildren(o,g,g.type,h,q),l++;p.impliedRules&&p.impliedRules(o,g,q)}m++}},getValue:function(a,c,d){var e="";return b.utils.startWith(c,"p-")&&(e=this.getPValue(a,!0)),b.utils.startWith(c,"e-")&&(e=this.getEValue(a)),b.utils.startWith(c,"u-")&&(e=this.getUValue(a,!0)),b.utils.startWith(c,"dt-")&&(e=this.getDTValue(a,c,d,!0)),e},getPValue:function(a,c){var d="";return c&&(d=this.getValueClass(a,"p")),!d&&c&&(d=this.getValueTitle(a)),d||(d=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),d||(d=b.domUtils.getAttrValFromTagList(a,["data"],"value")),("br"===a.name||"hr"===a.name)&&(d=""),d||(d=b.domUtils.getAttrValFromTagList(a,["img","area"],"alt")),d||(d=b.text.parse(this.document,a,this.options.textFormat)),d?d:""},getEValue:function(a){function c(a,c,d){var e,f,g;for(f=b.domUtils.getNodesByAttribute(a,c),e=f.length;e--;)try{g=b.domUtils.getAttribute(f[e],c),g&&""!==g&&""!==d&&-1===g.indexOf(":")&&(g=b.domUtils.resolveUrl(g,d),b.domUtils.setAttribute(f[e],c,g))}catch(h){}}var d={value:"",html:""};return c(a,"src",this.options.baseUrl),c(a,"href",this.options.baseUrl),d.value=b.text.parse(this.document,a,this.options.textFormat),d.html=b.html.parse(a),d},getUValue:function(a,c){var d="";return c&&(d=this.getValueClass(a,"u")),!d&&c&&(d=this.getValueTitle(a)),d||(d=b.domUtils.getAttrValFromTagList(a,["a","area"],"href")),d||(d=b.domUtils.getAttrValFromTagList(a,["img"],"src")),d||(d=b.domUtils.getAttrValFromTagList(a,["object"],"data")),d&&""!==d&&-1===d.indexOf(":")&&(d=b.domUtils.resolveUrl(d,this.options.baseUrl)),d||(d=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),d||(d=b.domUtils.getAttrValFromTagList(a,["data"],"value")),d||(d=b.text.parse(this.document,a,this.options.textFormat)),d?d:""},getDTValue:function(a,c,d,e){var f="";return e&&(f=this.getValueClass(a,"dt")),!f&&e&&(f=this.getValueTitle(a)),f||(f=b.domUtils.getAttrValFromTagList(a,["time","ins","del"],"datetime")),f||(f=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),f||(f=b.domUtils.getAttrValFromTagList(a,["data"],"value")),f||(f=b.text.parse(this.document,a,this.options.textFormat)),f?b.dates.isDuration(f)?f:b.dates.isTime(f)?(d&&d.times.push([c,b.dates.parseAmPmTime(f,this.options.dateFormat)]),b.dates.parseAmPmTime(f,this.options.dateFormat)):(d&&d.dates.push([c,new b.ISODate(f).toString(this.options.dateFormat)]),new b.ISODate(f).toString(this.options.dateFormat)):""},appendRootID:function(a,c,d){if(this.hasRootID(a,c,d)===!1){var e=[];b.domUtils.hasAttribute(a,"rootids")&&(e=b.domUtils.getAttributeList(a,"rootids")),e.push("id"+c+"-"+d),b.domUtils.setAttribute(a,"rootids",e.join(" "))}},hasRootID:function(a,c,d){var e=[];return b.domUtils.hasAttribute(a,"rootids")?(e=b.domUtils.getAttributeList(a,"rootids"),e.indexOf("id"+c+"-"+d)>-1):!1},getValueClass:function(a,c){var d,e,f,g=this,h=[];for(e=0,f=a.children.length;f>e;){d=a.children[e];var i=null;if(b.domUtils.hasAttributeValue(d,"class","value")){switch(c){case"p":i=g.getPValue(d,!1);break;case"u":i=g.getUValue(d,!1);break;case"dt":i=g.getDTValue(d,"",null,!1)}i&&h.push(b.utils.trim(i))}e++}return h.length>0?"p"===c?b.text.parseText(this.document,h.join(" "),this.options.textFormat):"u"===c?h.join(""):"dt"===c?b.dates.concatFragments(h,this.options.dateFormat).toString(this.options.dateFormat):void 0:null},getValueTitle:function(a){var c,d,e,f=[];for(c=b.domUtils.getNodesByAttributeValue(a,"class","value-title"),e=0,d=c.length;d>e;)b.domUtils.hasAttribute(c[e],"title")&&f.push(b.domUtils.getAttribute(c[e],"title")),e++;return f.join("")},hasHClass:function(a){var b=this.getUfClassNames(a);return b.root&&b.root.length>0?!0:!1},getUfClassNames:function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s={root:[],properties:[]};if(d=b.domUtils.getAttribute(a,"class"))for(f=d.split(" "),i=0,h=f.length;h>i;){for(g=b.utils.trim(f[i]),b.utils.startWith(g,r.rootPrefix)&&s.root.push(g),j=r.propertyPrefixes.length;j--;)b.utils.startWith(g,r.propertyPrefixes[j])&&s.properties.push(g);for(e in b.maps)b.maps.hasOwnProperty(e)&&b.maps[e].root===g&&-1===s.root.indexOf(e)&&(b.maps[e].subTree&&r.isSubTreeRoot(a,b.maps[e],f)===!1?s.properties.push("p-"+b.maps[e].root):s.root.push(e));if(c)for(var t=0;t<c.length;t++)if(q=c[t],l=r.getMapping(q))for(e in l.properties)if(l.properties.hasOwnProperty(e)&&(m=l.properties[e],n=m.map?m.map:"p-"+e,e===g))if(m.uf){for(k=0;h>k;)o=r.getV2RootName(f[k]),m.uf.indexOf(o)>-1&&-1===s.root.indexOf(o)&&s.root.push(o),k++;-1===s.properties.indexOf(n)&&s.properties.push(n)}else-1===s.properties.indexOf(n)&&s.properties.push(n);i++}if(c)for(var u=0;u<c.length;u++)q=c[u],this.findRelImpied&&(p=this.findRelImpied(a,q),p&&-1===s.properties.indexOf(p)&&s.properties.push(p));return s},getMapping:function(a){var c;for(c in b.maps)if(b.maps[c].root===a||c===a)return b.maps[c];return null},getV2RootName:function(a){var c;for(c in b.maps)if(b.maps[c].root===a)return c;return null},isSubTreeRoot:function(a,c,d){var e,f,g,h;for(e=this.createUfObject(c.name),f=!1,h=0,g=d.length;g>h;){var i=b.utils.trim(d[h]);for(var j in b.maps)if(b.maps.hasOwnProperty(j)&&b.maps[j].root===i&&b.maps[j].root!==c.root){f=!0;break}h++}return this.walkChildren(a,e,c.name,null,null),b.utils.hasProperties(e.properties)&&f===!1?!0:!1},createUfObject:function(a,c){var d={};return c&&b.utils.isOnlyWhiteSpace(c)===!1&&(d.value=c),b.utils.isArray(a)?d.type=a:d.type=[a],d.properties={},d.times=[],d.dates=[],d.altValue=null,d},removePropPrefix:function(a){var c;for(c=this.propertyPrefixes.length;c--;){var d=this.propertyPrefixes[c];b.utils.startWith(a,d)&&(a=a.substr(d.length))}return a},expandURLs:function(a,c){function d(a,d){if(a&&a.length)for(var e=a.length;e--;){var f=a[e].getAttribute(d);0!==f.toLowerCase().indexOf("http")&&a[e].setAttribute(d,b.domUtils.resolveUrl(f,c))}}return a=b.domUtils.clone(a),d(b.domUtils.getNodesByAttribute(a,"href"),"href"),d(b.domUtils.getNodesByAttribute(a,"src"),"src"),a},mergeOptions:function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b])},removeRootIds:function(a){var c,d;for(c=b.domUtils.getNodesByAttribute(a,"rootids"),d=c.length;d--;)b.domUtils.removeAttribute(c[d],"rootids")},clearUpDom:function(a){this.removeIncludes&&this.removeIncludes(a),this.removeRootIds(a)}},b.Parser.prototype.constructor=b.Parser,b.Parser&&(b.Parser.prototype.impliedRules=function(a,c,d){var e,f,g=this;if(c&&c.properties){if(!c.properties.name){e=this.getImpliedProperty(a,["img","area","abbr"],this.getNameAttr);var h=this.options.textFormat;e?c.properties.name=[b.text.parseText(this.document,e,h)]:c.properties.name=[b.text.parse(this.document,a,h)]}c.properties.name&&c.value&&d.root.length>0&&1===d.properties.length&&(c=g.impliedValueRule(c,d.properties[0],"p-name",c.properties.name[0])),c.properties.photo||(e=this.getImpliedProperty(a,["img","object"],this.getPhotoAttr),e&&(e&&""!==e&&""!==this.options.baseUrl&&-1===e.indexOf(":")&&(e=b.domUtils.resolveUrl(e,this.options.baseUrl)),c.properties.photo=[b.utils.trim(e)])),c.properties.url||(e=this.getImpliedProperty(a,["a","area"],this.getURLAttr),e&&(e&&""!==e&&""!==this.options.baseUrl&&-1===e.indexOf(":")&&(e=b.domUtils.resolveUrl(e,this.options.baseUrl)),c.properties.url=[b.utils.trim(e)])),c.properties.url&&d&&1===d.root.length&&1===d.properties.length&&(c=g.impliedValueRule(c,d.properties[0],"u-url",c.properties.url[0]))}c.times.length>0&&c.dates.length>0&&(f=b.dates.dateTimeUnion(c.dates[0][1],c.times[0][1],this.options.dateFormat),c.properties[this.removePropPrefix(c.times[0][0])][0]=f.toString(this.options.dateFormat)),delete c.times,delete c.dates,null!==c.altValue&&(c.value=c.altValue.value),delete c.altValue},b.Parser.prototype.getImpliedProperty=function(a,c,d){var e,f,g=d(a);return g||(e=b.domUtils.getSingleDescendantOfType(a,c),e&&this.hasHClass(e)===!1&&(g=d(e)),a.children.length>0&&(f=b.domUtils.getSingleDescendant(a),f&&this.hasHClass(f)===!1&&(e=b.domUtils.getSingleDescendantOfType(f,c),e&&this.hasHClass(e)===!1&&(g=d(e))))),g},b.Parser.prototype.getNameAttr=function(a){var c=b.domUtils.getAttrValFromTagList(a,["img","area"],"alt");return c||(c=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),c},b.Parser.prototype.getPhotoAttr=function(a){var c=b.domUtils.getAttrValFromTagList(a,["img"],"src");return c||b.domUtils.hasAttributeValue(a,"class","include")!==!1||(c=b.domUtils.getAttrValFromTagList(a,["object"],"data")),c},b.Parser.prototype.getURLAttr=function(a){var c=null;return b.domUtils.hasAttributeValue(a,"class","include")===!1&&(c=b.domUtils.getAttrValFromTagList(a,["a"],"href"),c||(c=b.domUtils.getAttrValFromTagList(a,["area"],"href"))),c},b.Parser.prototype.impliedValueRule=function(a,c,d,e){return a.value&&(b.utils.startWith(c,"p-")&&"p-name"===d&&(a.altValue={name:d,value:e}),b.utils.startWith(c,"e-")&&(a.altValue={name:d,value:e}),b.utils.startWith(c,"u-")&&(a.altValue={name:d,value:e})),a}),b.Parser&&(b.Parser.prototype.addIncludes=function(a){this.addAttributeIncludes(a,"itemref"),this.addAttributeIncludes(a,"headers"),this.addClassIncludes(a)},b.Parser.prototype.addAttributeIncludes=function(a,c){var d,e,f,g,h,i;for(d=b.domUtils.getNodesByAttribute(a,c),g=0,f=d.length;f>g;){if(e=b.domUtils.getAttributeList(d[g],c))for(h=0,i=e.length;i>h;)this.apppendInclude(d[g],e[h]),h++;g++}},b.Parser.prototype.addClassIncludes=function(a){var c,d,e,f=0;for(d=b.domUtils.getNodesByAttributeValue(a,"class","include"),e=d.length;e>f;)c=b.domUtils.getAttrValFromTagList(d[f],["a"],"href"),c||(c=b.domUtils.getAttrValFromTagList(d[f],["object"],"data")),this.apppendInclude(d[f],c),f++},b.Parser.prototype.apppendInclude=function(a,c){var d,e;c=b.utils.trim(c.replace("#","")),d=b.domUtils.getElementById(this.document,c),d&&(e=b.domUtils.clone(d),this.markIncludeChildren(e),b.domUtils.appendChild(a,e))},b.Parser.prototype.markIncludeChildren=function(a){var c,d,e;for(c=this.findRootNodes(a),d=0,e=c.length,b.domUtils.setAttribute(a,"data-include","true"),b.domUtils.setAttribute(a,"style","display:none");e>d;)b.domUtils.setAttribute(c[d],"data-include","true"),d++},b.Parser.prototype.removeIncludes=function(a){var c,d;for(c=b.domUtils.getNodesByAttribute(a,"data-include"),d=c.length;d--;)b.domUtils.removeChild(a,c[d])}),b.Parser&&(b.Parser.prototype.findRels=function(a){var c,d,e,f,g,h,i,j,k,l={items:[],rels:{},"rel-urls":{}};for(k=b.domUtils.getNodesByAttribute(a,"rel"),c=0,d=k.length;d>c;){if(g=b.domUtils.getAttribute(k[c],"rel")){for(h=g.split(" "),f=0,e=h.length;e>f;){if(i=b.utils.trim(h[f]),j=b.domUtils.getAttrValFromTagList(k[c],["a","area"],"href"),j||(j=b.domUtils.getAttrValFromTagList(k[c],["link"],"href")),l.rels[i]||(l.rels[i]=[]),"string"==typeof this.options.baseUrl&&"string"==typeof j){var m=b.domUtils.resolveUrl(j,this.options.baseUrl);-1===l.rels[i].indexOf(m)&&l.rels[i].push(m)}f++}var n=null;b.domUtils.hasAttribute(k[c],"href")&&(n=b.domUtils.getAttribute(k[c],"href"),n&&(n=b.domUtils.resolveUrl(n,this.options.baseUrl)));var o=this.getRelProperties(k[c]);if(o.rels=h,n&&void 0===l["rel-urls"][n]&&(l["rel-urls"][n]=o),g.toLowerCase().indexOf("alternate")>-1){var p=this.getRelProperties(k[c]);if(n&&(p.url=n),h.length>1&&b.domUtils.hasAttribute(k[c],"rel")){var q=g;p.rel=b.utils.trim(q.toLowerCase().replace("alternate",""))}l.alternate||(l.alternate=[]),l.alternate.push(p)}}c++}return l},b.Parser.prototype.getRelProperties=function(a){var c={};return b.domUtils.hasAttribute(a,"media")&&(c.media=b.domUtils.getAttribute(a,"media")),b.domUtils.hasAttribute(a,"type")&&(c.type=b.domUtils.getAttribute(a,"type")),b.domUtils.hasAttribute(a,"hreflang")&&(c.hreflang=b.domUtils.getAttribute(a,"hreflang")),b.domUtils.hasAttribute(a,"title")&&(c.title=b.domUtils.getAttribute(a,"title")),""!==b.utils.trim(this.getPValue(a,!1))&&(c.text=this.getPValue(a,!1)),c},b.Parser.prototype.findRelImpied=function(a,c){var d,e,f;if(e=this.getMapping(c))for(var g in e.properties)if(e.properties.hasOwnProperty(g)){var h=e.properties[g],i=h.map?h.map:"p-"+g,j=0;if(h.relAlt&&b.domUtils.hasAttribute(a,"rel")){for(f=h.relAlt.length;f--;)b.domUtils.hasAttributeValue(a,"rel",h.relAlt[f])&&j++;j===h.relAlt.length&&(d=i)}}return d}),b.utils={isString:function(a){return"string"==typeof a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isArray:function(a){return a&&!a.propertyIsEnumerable("length")&&"object"==typeof a&&"number"==typeof a.length},startWith:function(a,b){return 0===a.indexOf(b)},trim:function(a){return a&&this.isString(a)?a.replace(/^\s+|\s+$/g,""):""},replaceCharAt:function(a,b,c){return a&&a.length>b?a.substr(0,b)+c+a.substr(b+c.length):a},trimWhitespace:function(a){if(a&&a.length){for(var b=a.length,c=0;b--&&this.isOnlyWhiteSpace(a[b]);)a=this.replaceCharAt(a,b," ");for(b=a.length;b>c&&this.isOnlyWhiteSpace(a[c]);)a=this.replaceCharAt(a,b," "),c++}return this.trim(a)},isOnlyWhiteSpace:function(a){return!/[^\t\n\r ]/.test(a)},removeWhiteSpace:function(a){return a.replace(/[\t\n\r ]+/g," ")},hasProperties:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1},sortObjects:function(a,b){return b=b?-1:1,function(c,d){return c=c[a],d=d[a],d>c?-1*b:c>d?1*b:0}}},b.domUtils={ownerDocument:function(a){return a.ownerDocument},textContent:function(a){return a.textContent?a.textContent:a.innerText?a.innerText:""},innerHTML:function(a){return a.innerHTML},hasAttribute:function(a,b){return a.hasAttribute(b)},hasAttributeValue:function(a,b,c){return this.getAttributeList(a,b).indexOf(c)>-1},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},getElementById:function(a,b){return a.querySelector("#"+b)},querySelector:function(a,b){return a.querySelector(b)},getAttributeList:function(a,b){var c,d=[];return c=a.getAttribute(b),c&&""!==c&&(c.indexOf(" ")>-1?d=c.split(" "):d.push(c)),d},hasAttributeValue:function(a,b,c){var d=this.getAttributeList(a,b);return d.indexOf(c)>-1},getNodesByAttribute:function(a,b){var c="["+b+"]";return a.querySelectorAll(c)},getNodesByAttributeValue:function(a,b,c){var d,e=[],f=0,g=[];if(e=this.getNodesByAttribute(a,b))for(d=e.length;d>f;)this.hasAttributeValue(e[f],b,c)&&g.push(e[f]),f++;return g},getAttrValFromTagList:function(a,b,c){for(var d=b.length;d--;)if(a.tagName.toLowerCase()===b[d]){var e=this.getAttribute(a,c);if(e&&""!==e)return e}return null},getSingleDescendant:function(a){return this.getDescendant(a,null,!1)},getSingleDescendantOfType:function(a,b){return this.getDescendant(a,b,!0)},getDescendant:function(a,b,c){for(var d,e=a.children.length,f=0,g=0,h=null;e--;)d=a.children[e],1===d.nodeType&&(b?this.hasTagName(d,b)&&(h=d,g++):(h=d,f++));return c===!0?1===g?h:null:1===f?h:null},hasTagName:function(a,b){for(var c=b.length;c--;)if(a.tagName.toLowerCase()===b[c])return!0;return!1},appendChild:function(a,b){return a.appendChild(b)},removeChild:function(a){return a.parentNode?a.parentNode.removeChild(a):null},clone:function(a){var b=a.cloneNode(!0);return b.removeAttribute("id"),b},resolveUrl:function(a,d){if(!b.utils.isString(a)||!b.utils.isString(d)||-1!==a.indexOf(":"))return b.utils.isString(a)?a:"";try{return new URL(a,d).toString()}catch(e){return c.resolve(d,a)}},getElementText:function(a){return a&&a.data?a.data:""},getOrderedAttributes:function(a){for(var c=a.outerHTML,d=[],e=0;e<a.attributes.length;e++){var f=a.attributes[e];f.indexNum=c.indexOf(f.name),d.push(f)}return d.sort(b.utils.sortObjects("indexNum"))},decodeEntities:function(a,b){return a.createTextNode(b).nodeValue},cloneDocument:function(a){var b,c=null;return a.importNode&&a.implementation&&a.implementation.createHTMLDocument&&(c=a.implementation.createHTMLDocument(""),b=c.importNode(a.documentElement,!0),c.replaceChild(b,c.querySelector("html"))),b&&b.nodeType&&1===b.nodeType?c:a},getChildIndex:function(a){for(var b,c=a.parentNode,d=-1;c&&(b=c.childNodes[++d]);)if(b==a)return d;return-1},getNodePath:function(a){var b=a.parentNode,c=[],d=this.getChildIndex(a);return b&&(c=this.getNodePath(b))&&d>-1&&c.push(d),c},getNodeByPath:function(a,b){for(var c,d=a.documentElement,e=0;(c=b[++e])>-1;)d=d.childNodes[c];return d}};var c=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1<a.length){a[0]=a[0].slice(0,-1);for(var b=a.length-1,c=1;b>c;++c)a[c]=a[c].slice(1,-1);return a[b]=a[b].slice(1),a.join("")}return a[0]}function b(a){a=a.charCodeAt(0);var b;return b=16>a?"%0"+a.toString(16).toUpperCase():128>a?"%"+a.toString(16).toUpperCase():2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(63&a|128).toString(16).toUpperCase():"%"+(a>>12|224).toString(16).toUpperCase()+"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(63&a|128).toString(16).toUpperCase()}function c(a){for(var b,c,d,e="",f=0,g=a.length;g>f;)b=parseInt(a.substr(f+1,2),16),128>b?(e+=String.fromCharCode(b),f+=3):b>=194&&224>b?(g-f>=6?(c=parseInt(a.substr(f+4,2),16),e+=String.fromCharCode((31&b)<<6|63&c)):e+=a.substr(f,6),f+=6):b>=224?(g-f>=9?(c=parseInt(a.substr(f+4,2),16),d=parseInt(a.substr(f+7,2),16),e+=String.fromCharCode((15&b)<<12|(63&c)<<6|63&d)):e+=a.substr(f,9),f+=9):(e+=a.substr(f,3),f+=3);return e}function d(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function e(a){return a.toUpperCase()}function f(a,d){function f(a){var b=c(a);return b.match(d.m)?b:a}a.scheme&&(a.scheme=String(a.scheme).replace(d.a,f).toLowerCase().replace(d.j,"")),void 0!==a.userinfo&&(a.userinfo=String(a.userinfo).replace(d.a,f).replace(d.l,b).replace(d.a,e)),void 0!==a.host&&(a.host=String(a.host).replace(d.a,f).toLowerCase().replace(d.f,b).replace(d.a,e)),void 0!==a.path&&(a.path=String(a.path).replace(d.a,f).replace(a.scheme?d.g:d.h,b).replace(d.a,e)),void 0!==a.query&&(a.query=String(a.query).replace(d.a,f).replace(d.i,b).replace(d.a,e)),void 0!==a.fragment&&(a.fragment=String(a.fragment).replace(d.a,f).replace(d.c,b).replace(d.a,e))}function g(a,b){void 0===b&&(b={});var c,d=l,e={};return"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a),(c=a.match(m))?(r?(e.scheme=c[1],e.userinfo=c[3],e.host=c[4],e.port=parseInt(c[5],10),e.path=c[6]||"",e.query=c[7],e.fragment=c[8],isNaN(e.port)&&(e.port=c[5])):(e.scheme=c[1]||void 0,e.userinfo=-1!==a.indexOf("@")?c[3]:void 0,e.host=-1!==a.indexOf("//")?c[4]:void 0,e.port=parseInt(c[5],10),e.path=c[6]||"",e.query=-1!==a.indexOf("?")?c[7]:void 0,e.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(e.port)&&(e.port=a.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?c[4]:void 0)),e.reference=void 0!==e.scheme||void 0!==e.userinfo||void 0!==e.host||void 0!==e.port||e.path||void 0!==e.query?void 0===e.scheme?"relative":void 0===e.fragment?"absolute":"uri":"same-document",b.reference&&"suffix"!==b.reference&&b.reference!==e.reference&&(e.error=e.error||"URI is not a "+b.reference+" reference."),c=s[(b.scheme||e.scheme||"").toLowerCase()],f(e,d),c&&c.parse&&c.parse(e,b)):e.error=e.error||"URI can not be parsed.",e}function h(a){var b=[];return void 0!==a.userinfo&&(b.push(a.userinfo),b.push("@")),void 0!==a.host&&b.push(a.host),"number"==typeof a.port&&(b.push(":"),b.push(a.port.toString(10))),b.length?b.join(""):void 0}function i(a){for(var b,c=[];a.length;)a.match(n)?a=a.replace(n,""):a.match(o)?a=a.replace(o,"/"):a.match(p)?(a=a.replace(p,"/"),c.pop()):"."===a||".."===a?a="":(b=a.match(q)[0],a=a.slice(b.length),c.push(b));return c.join("")}function j(a,b){void 0===b&&(b={});var c,d,e=l,g=[];return(c=s[(b.scheme||a.scheme||"").toLowerCase()])&&c.serialize&&c.serialize(a,b),f(a,e),"suffix"!==b.reference&&a.scheme&&(g.push(a.scheme),g.push(":")),e=h(a),void 0!==e&&("suffix"!==b.reference&&g.push("//"),g.push(e),a.path&&"/"!==a.path.charAt(0)&&g.push("/")),void 0!==a.path&&(d=a.path,b.absolutePath||c&&c.absolutePath||(d=i(d)),void 0===e&&(d=d.replace(/^\/\//,"/%2F")),g.push(d)),void 0!==a.query&&(g.push("?"),g.push(a.query)),void 0!==a.fragment&&(g.push("#"),g.push(a.fragment)),g.join("")}function k(a,b,c,d){void 0===c&&(c={});var e={};return d||(a=g(j(a,c),c),b=g(j(b,c),c)),c=c||{},!c.tolerant&&b.scheme?(e.scheme=b.scheme,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=i(b.path),e.query=b.query):(void 0!==b.userinfo||void 0!==b.host||void 0!==b.port?(e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=i(b.path),e.query=b.query):(b.path?("/"===b.path.charAt(0)?e.path=i(b.path):(void 0===a.userinfo&&void 0===a.host&&void 0===a.port||a.path?a.path?e.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:e.path=b.path:e.path="/"+b.path,e.path=i(e.path)),e.query=b.query):(e.path=a.path,e.query=void 0!==b.query?b.query:a.query),e.userinfo=a.userinfo,e.host=a.host,e.port=a.port),e.scheme=a.scheme),e.fragment=b.fragment,e}var l=function(b){var c=a("[0-9]","[A-Fa-f]"),d=a("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",b?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");return{s:!1,j:new RegExp(a("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),l:new RegExp(a("[^\\%\\:]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),f:new RegExp(a("[^\\%]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),g:new RegExp(a("[^\\%\\/\\:\\@]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),h:new RegExp(a("[^\\%\\/\\@]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),i:new RegExp(a("[^\\%]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]",b?"[\\uE000-\\uF8FF]":"[]"),"g"),c:new RegExp(a("[^\\%]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),b:new RegExp(a("[^]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),m:new RegExp(d,"g"),o:new RegExp(a("[^\\%]",d,a("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]")),"g"),a:new RegExp("(?:"+("(?:"+("%[EFef]"+c+"%"+c+c+"%"+c+c)+")|"+("(?:"+("%[89A-Fa-f]"+c+"%"+c+c)+")")+"|"+("(?:"+("%"+c+c)+")"))+")","g")}}(!1),m=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,n=/^\.\.?\//,o=/^\/\.(\/|$)/,p=/^\/\.\.(\/|$)/,q=/^\/?(?:.|\n)*?(?=\/|$)/,r=void 0==="".match(/(){0}/)[1],s={};return{IRI_SUPPORT:!1,VALIDATE_SUPPORT:!1,pctEncChar:b,pctDecChars:c,SCHEMES:s,parse:g,_recomposeAuthority:h,removeDotSegments:i,serialize:j,resolveComponents:k,resolve:function(a,b,c){return j(k(g(a,c),g(b,c),c,!0),c)},normalize:function(a,b){return"string"==typeof a?a=j(g(a,b),b):"object"===d(a)&&(a=g(j(a,b),b)),a},equal:function(a,b,c){return"string"==typeof a?a=j(g(a,c),c):"object"===d(a)&&(a=j(a,c)),"string"==typeof b?b=j(g(b,c),c):"object"===d(b)&&(b=j(b,c)),a===b},escapeComponent:function(a){return a&&a.toString().replace(l.b,b)},unescapeComponent:function(a){return a&&a.toString().replace(l.a,c)}}}();c.SCHEMES.http=c.SCHEMES.https={domainHost:!0,parse:function(a){return a.host||(a.error=a.error||"HTTP URIs must have a host."),a},serialize:function(a){return(a.port===("https"!==String(a.scheme).toLowerCase()?80:443)||""===a.port)&&(a.port=void 0),a.path||(a.path="/"),a}},b.ISODate=function(a,b){this.clear(),this.format=b?b:"auto",this.setFormatSep(),arguments[0]&&this.parse(a,b)},b.ISODate.prototype={clear:function(){this.clearDate(),this.clearTime(),this.clearTimeZone(),this.setAutoProfileState()},clearDate:function(){this.dY=-1,this.dM=-1,this.dD=-1,this.dDDD=-1},clearTime:function(){this.tH=-1,this.tM=-1,this.tS=-1,this.tD=-1},clearTimeZone:function(){this.tzH=-1,this.tzM=-1,this.tzPN="+",this.z=!1},setAutoProfileState:function(){this.autoProfile={sep:"T",dsep:"-",tsep:":",tzsep:":",tzZulu:"Z"}},parse:function(a,b){this.clear();var c=[],d=[],e=0,f="",g="",h="";return b&&(this.format=b),a.indexOf("t")>-1&&(this.autoProfile.sep="t"),a.indexOf("z")>-1&&(this.autoProfile.tzZulu="z"),a.indexOf("Z")>-1&&(this.autoProfile.tzZulu="Z"),-1===a.toUpperCase().indexOf("T")&&(this.autoProfile.sep=" "),a=a.toUpperCase().replace(" ","T"),a.indexOf("T")>-1?(c=a.split("T"),f=c[0],g=c[1],g.indexOf("Z")>-1&&(this.z=!0),(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(d=g.split("Z"),g=d[0],h=d[1],(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(e=0,e=g.indexOf("+")>-1?g.indexOf("+"):g.indexOf("-"),h=g.substring(e,g.length),g=g.substring(0,e)))):f=a,""!==f&&(this.parseDate(f),""!==g&&(this.parseTime(g),""!==h&&this.parseTimeZone(h))),this.toString(b)},parseDate:function(a,b){this.clearDate();var c=[];return-1===a.indexOf("-")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d\d\d)-(\d\d\d)/),c&&(c[1]&&(this.dY=c[1]),c[2]&&(this.dDDD=c[2])),-1===this.dDDD&&(c=a.match(/(\d\d\d\d)?-?(\d\d)?-?(\d\d)?/),c[1]&&(this.dY=c[1]),c[2]&&(this.dM=c[2]),c[3]&&(this.dD=c[3])),this.toString(b)},parseTime:function(a,b){this.clearTime();var c=[];return-1===a.indexOf(":")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d)?:?(\d\d)?:?(\d\d)?.?([0-9]+)?/),c[1]&&(this.tH=c[1]),c[2]&&(this.tM=c[2]),c[3]&&(this.tS=c[3]),c[4]&&(this.tD=c[4]),this.toTimeString(b)},parseTimeZone:function(a,b){this.clearTimeZone();var c=[];return"z"===a.toLowerCase()?(this.z=!0,this.autoProfile.tzZulu="z"===a?"z":"Z"):(-1===a.indexOf(":")&&(this.autoProfile.tzsep=""),c=a.match(/([\-\+]{1})?(\d\d)?:?(\d\d)?/),c[1]&&(this.tzPN=c[1]),c[2]&&(this.tzH=c[2]),c[3]&&(this.tzM=c[3])),this.tzZulu="z",this.toTimeString(b)},toString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.dY>-1?(b=this.dY,this.dM>0&&this.dM<13&&(b+=this.dsep+this.dM,this.dD>0&&this.dD<32&&(b+=this.dsep+this.dD,this.tH>-1&&this.tH<25&&(b+=this.sep+this.toTimeString(a)))),this.dDDD>-1&&(b+=this.dsep+this.dDDD)):this.tH>-1&&(b+=this.toTimeString(a)),b},toTimeString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.tH&&this.tH>-1&&this.tH<25&&(b+=this.tH,this.tM>-1&&this.tM<61&&(b+=this.tsep+this.tM,this.tS>-1&&this.tS<61&&(b+=this.tsep+this.tS,this.tD>-1&&(b+="."+this.tD))),this.z?b+=this.tzZulu:this.tzH&&this.tzH>-1&&this.tzH<25&&(b+=this.tzPN+this.tzH,this.tzM>-1&&this.tzM<61&&(b+=this.tzsep+this.tzM))),b},setFormatSep:function(){switch(this.format.toLowerCase()){case"rfc3339":this.sep="T",this.dsep="",this.tsep="",this.tzsep="",this.tzZulu="Z";break;case"w3c":this.sep="T",this.dsep="-",this.tsep=":",this.tzsep=":",
this.tzZulu="Z";break;case"html5":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;default:this.sep=this.autoProfile.sep,this.dsep=this.autoProfile.dsep,this.tsep=this.autoProfile.tsep,this.tzsep=this.autoProfile.tzsep,this.tzZulu=this.autoProfile.tzZulu}},hasFullDate:function(){return-1!==this.dY&&-1!==this.dM&&-1!==this.dD},hasDate:function(){return-1!==this.dY},hasTime:function(){return-1!==this.tH},hasTimeZone:function(){return-1!==this.tzH}},b.ISODate.prototype.constructor=b.ISODate,b.dates={hasAM:function(a){return a=a.toLowerCase(),a.indexOf("am")>-1||a.indexOf("a.m.")>-1},hasPM:function(a){return a=a.toLowerCase(),a.indexOf("pm")>-1||a.indexOf("p.m.")>-1},removeAMPM:function(a){return a.replace("pm","").replace("p.m.","").replace("am","").replace("a.m.","")},isDuration:function(a){return b.utils.isString(a)&&(a=a.toLowerCase(),b.utils.startWith(a,"p"))?!0:!1},isTime:function(a){if(b.utils.isString(a)){if(a=a.toLowerCase(),a=b.utils.trim(a),a.match(":")&&(b.utils.startWith(a,"z")||b.utils.startWith(a,"-")||b.utils.startWith(a,"+")))return!0;if(a.match(/^[0-9]/)&&(this.hasAM(a)||this.hasPM(a)))return!0;if(a.match(":")&&!a.match(/t|\s/))return!0;if(b.utils.isNumber(a)&&(2===a.length||4===a.length||6===a.length))return!0}return!1},parseAmPmTime:function(a){var c=a,d=[];return b.utils.isString(c)&&(a=a.replace(/[ ]+/g,""),(a.match(":")||this.hasAM(a)||this.hasPM(a))&&(a.match(":")?d=a.split(":"):(d[0]=a,d[0]=this.removeAMPM(d[0])),this.hasPM(a)&&d[0]<12&&(d[0]=parseInt(d[0],10)+12),d[0]&&1===d[0].length&&(d[0]="0"+d[0]),d[0]&&(a=d.join(":")))),this.removeAMPM(a)},dateTimeUnion:function(a,c,d){var e=new b.ISODate(a,d),f=new b.ISODate;return f.parseTime(this.parseAmPmTime(c),d),e.hasFullDate()&&f.hasTime()?(e.tH=f.tH,e.tM=f.tM,e.tS=f.tS,e.tD=f.tD,e):e.hasFullDate()?e:new b.ISODate},concatFragments:function(a,c){var d=new b.ISODate,e=0,f="";if(a[0].toUpperCase().match("T"))return new b.ISODate(a[0],c);for(e=0;e<a.length;e++){if(f=a[e],"-"===f.charAt(4)&&d.hasFullDate()===!1&&d.parseDate(f),(f.indexOf(":")>-1||b.utils.isNumber(this.parseAmPmTime(f)))&&d.hasTime()===!1){var g=this.splitTimeAndZone(f);f=g[0],f=this.parseAmPmTime(f),d.parseTime(f),g.length>1&&d.parseTimeZone(g[1],c)}("-"===f.charAt(0)||"+"===f.charAt(0)||"Z"===f.toUpperCase())&&d.hasTimeZone()===!1&&d.parseTimeZone(f)}return d},splitTimeAndZone:function(a){for(var b=[a],c=["-","+","z","Z"],d=c.length;d--;)if(a.indexOf(c[d])>-1){b[0]=a.slice(0,a.indexOf(c[d])),b.push(a.slice(a.indexOf(c[d])));break}return b}},b.text={textFormat:"whitespacetrimmed",blockLevelTags:["h1","h2","h3","h4","h5","h6","p","hr","pre","table","address","article","aside","blockquote","caption","col","colgroup","dd","div","dt","dir","fieldset","figcaption","figure","footer","form","header","hgroup","hr","li","map","menu","nav","optgroup","option","section","tbody","testarea","tfoot","th","thead","tr","td","ul","ol","dl","details"],excludeTags:["noframe","noscript","script","style","frames","frameset"],parse:function(a,c,d){var e;return this.textFormat=d?d:this.textFormat,"normalised"===this.textFormat?(e=this.walkTreeForText(c),void 0!==e?this.normalise(a,e):""):this.formatText(a,b.domUtils.textContent(c),this.textFormat)},parseText:function(a,b,c){var d=a.createElement("div");return d.innerHTML=b,this.parse(a,d,c)},formatText:function(a,c,d){if(this.textFormat=d?d:this.textFormat,c){var e="",f=/(<([^>]+)>)/gi;return e=c.replace(f,""),"whitespacetrimmed"===this.textFormat&&(e=b.utils.trimWhitespace(e)),b.domUtils.decodeEntities(a,e)}return""},normalise:function(a,c){return c=c.replace(/&nbsp;/g," "),c=b.utils.removeWhiteSpace(c),c=b.domUtils.decodeEntities(a,c),c=c.replace("–","-"),b.utils.trim(c)},walkTreeForText:function(a){var c="",d=0;if(a.tagName&&this.excludeTags.indexOf(a.tagName.toLowerCase())>-1)return c;if(a.nodeType&&3===a.nodeType&&(c+=b.domUtils.getElementText(a)),a.childNodes&&a.childNodes.length>0)for(d=0;d<a.childNodes.length;d++){var e=this.walkTreeForText(a.childNodes[d]);void 0!==e&&(c+=e)}return a.tagName&&-1!==this.blockLevelTags.indexOf(a.tagName.toLowerCase())&&(c+=" "),""===c?void 0:c}},b.html={selfClosingElt:["area","base","br","col","hr","img","input","link","meta","param","command","keygen","source"],parse:function(a){var b="",c=0;if(a.childNodes&&a.childNodes.length>0)for(c=0;c<a.childNodes.length;c++){var d=this.walkTreeForHtml(a.childNodes[c]);void 0!==d&&(b+=d)}return b},walkTreeForHtml:function(a){var c="",d=0;if(a.nodeType&&3===a.nodeType&&(c+=b.domUtils.getElementText(a)),a.nodeType&&1===a.nodeType&&b.domUtils.hasAttribute(a,"data-include")===!1){c+="<"+a.tagName.toLowerCase();var e=b.domUtils.getOrderedAttributes(a);for(d=0;d<e.length;d++)c+=" "+e[d].name+'="'+e[d].value+'"';if(-1===this.selfClosingElt.indexOf(a.tagName.toLowerCase())&&(c+=">"),a.childNodes&&a.childNodes.length>0)for(d=0;d<a.childNodes.length;d++){var f=this.walkTreeForHtml(a.childNodes[d]);void 0!==f&&(c+=f)}c+=this.selfClosingElt.indexOf(a.tagName.toLowerCase())>-1?" />":"</"+a.tagName.toLowerCase()+">"}return""===c?void 0:c}},b.maps["h-adr"]={root:"adr",name:"h-adr",properties:{"post-office-box":{},"street-address":{},"extended-address":{},locality:{},region:{},"postal-code":{},"country-name":{}}},b.maps["h-card"]={root:"vcard",name:"h-card",properties:{fn:{map:"p-name"},adr:{uf:["h-adr"]},agent:{uf:["h-card"]},bday:{map:"dt-bday"},"class":{},category:{map:"p-category",relAlt:["tag"]},email:{map:"u-email"},geo:{map:"p-geo",uf:["h-geo"]},key:{},label:{},logo:{map:"u-logo"},mailer:{},"honorific-prefix":{},"given-name":{},"additional-name":{},"family-name":{},"honorific-suffix":{},nickname:{},note:{},org:{},"p-organization-name":{},"p-organization-unit":{},photo:{map:"u-photo"},rev:{map:"dt-rev"},role:{},sequence:{},"sort-string":{},sound:{map:"u-sound"},title:{},tel:{},tz:{},uid:{map:"u-uid"},url:{map:"u-url"}}},b.maps["h-entry"]={root:"hentry",name:"h-entry",properties:{"entry-title":{map:"p-name"},"entry-summary":{map:"p-summary"},"entry-content":{map:"e-content"},published:{map:"dt-published"},updated:{map:"dt-updated"},author:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},geo:{map:"p-geo",uf:["h-geo"]},latitude:{},longitude:{},url:{map:"u-url",relAlt:["bookmark"]}}},b.maps["h-event"]={root:"vevent",name:"h-event",properties:{summary:{map:"p-name"},dtstart:{map:"dt-start"},dtend:{map:"dt-end"},description:{},url:{map:"u-url"},category:{map:"p-category",relAlt:["tag"]},location:{uf:["h-card"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},duration:{map:"dt-duration"},contact:{uf:["h-card"]},organizer:{uf:["h-card"]},attendee:{uf:["h-card"]},uid:{map:"u-uid"},attach:{map:"u-attach"},status:{},rdate:{},rrule:{}}},b.maps["h-geo"]={root:"geo",name:"h-geo",properties:{latitude:{},longitude:{}}},b.maps["h-item"]={root:"item",name:"h-item",subTree:!1,properties:{fn:{map:"p-name"},url:{map:"u-url"},photo:{map:"u-photo"}}},b.maps["h-listing"]={root:"hlisting",name:"h-listing",properties:{version:{},lister:{uf:["h-card"]},dtlisted:{map:"dt-listed"},dtexpired:{map:"dt-expired"},location:{},price:{},item:{uf:["h-card","a-adr","h-geo"]},summary:{map:"p-name"},description:{map:"e-description"},listing:{}}},b.maps["h-news"]={root:"hnews",name:"h-news",properties:{entry:{uf:["h-entry"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},"source-org":{uf:["h-card"]},dateline:{uf:["h-card"]},"item-license":{map:"u-item-license"},principles:{map:"u-principles",relAlt:["principles"]}}},b.maps["h-org"]={root:"h-x-org",name:"h-org",properties:{"organization-name":{},"organization-unit":{}}},b.maps["h-product"]={root:"hproduct",name:"h-product",properties:{brand:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},price:{},description:{map:"e-description"},fn:{map:"p-name"},photo:{map:"u-photo"},url:{map:"u-url"},review:{uf:["h-review","h-review-aggregate"]},listing:{uf:["h-listing"]},identifier:{map:"u-identifier"}}},b.maps["h-recipe"]={root:"hrecipe",name:"h-recipe",properties:{fn:{map:"p-name"},ingredient:{map:"e-ingredient"},"yield":{},instructions:{map:"e-instructions"},duration:{map:"dt-duration"},photo:{map:"u-photo"},summary:{},author:{uf:["h-card"]},published:{map:"dt-published"},nutrition:{},tag:{}}},b.maps["h-resume"]={root:"hresume",name:"h-resume",properties:{summary:{},contact:{uf:["h-card"]},education:{uf:["h-card","h-event"]},experience:{uf:["h-card","h-event"]},skill:{},affiliation:{uf:["h-card"]}}},b.maps["h-review-aggregate"]={root:"hreview-aggregate",name:"h-review-aggregate",properties:{summary:{map:"p-name"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},rating:{},average:{},best:{},worst:{},count:{},votes:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},b.maps["h-review"]={root:"hreview",name:"h-review",properties:{summary:{map:"p-name"},description:{map:"e-description"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},reviewer:{uf:["h-card"]},dtreviewer:{map:"dt-reviewer"},rating:{},best:{},worst:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},b.rels={friend:["yes","external"],acquaintance:["yes","external"],contact:["yes","external"],met:["yes","external"],"co-worker":["yes","external"],colleague:["yes","external"],"co-resident":["yes","external"],neighbor:["yes","external"],child:["yes","external"],parent:["yes","external"],sibling:["yes","external"],spouse:["yes","external"],kin:["yes","external"],muse:["yes","external"],crush:["yes","external"],date:["yes","external"],sweetheart:["yes","external"],me:["yes","external"],license:["yes","yes"],nofollow:["no","external"],tag:["no","yes"],self:["no","external"],bookmark:["no","external"],author:["no","external"],home:["no","external"],directory:["no","external"],enclosure:["no","external"],pronunciation:["no","external"],payment:["no","external"],principles:["no","external"]};var d={version:b.version,livingStandard:b.livingStandard};return d.get=function(a){var c=new b.Parser;return c.get(a)},d.count=function(c){var d=new b.Parser;return a(d,c),d.count(c)},d.isMicroformat=function(c,d){var e=new b.Parser;return a(e,d),e.isMicroformat(c)},d});
//# sourceMappingURL=microformat-shiv.min.js.map