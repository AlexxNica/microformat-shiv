/*
   microformat-shiv - v0.3.4
   Built: 2015-06-26 09:06 - http://microformat-shiv.com
   Copyright (c) 2015 Glenn Jones
   Licensed MIT 
*/



function ISODate(a,b){this.clear(),this.format=b?b:"auto",this.setFormatSep(),arguments[0]&&this.parse(a,b)}function Text(){this.textFormat="whitespacetrimmed",this.blockLevelTags=["h1","h2","h3","h4","h5","h6","p","hr","pre","table","address","article","aside","blockquote","caption","col","colgroup","dd","div","dt","dir","fieldset","figcaption","figure","footer","form","header","hgroup","hr","li","map","menu","nav","optgroup","option","section","tbody","testarea","tfoot","th","thead","tr","td","ul","ol","dl","details"],this.excludeTags=["noframe","noscript","script","style","frames","frameset"]}function Html(){this.voidElt=["area","base","br","col","hr","img","input","link","meta","param","command","keygen","source"]}var microformats={};microformats.Parser=function(){this.rootPrefix="h-",this.propertyPrefixes=["p-","dt-","u-","e-"],this.options={baseUrl:"",filters:[],version1:!0,children:!0,childrenRel:!1,rel:!0,includes:!0,textFormat:"whitespacetrimmed",dateFormat:"auto"},this.maps={},this.rels={}},microformats.Parser.prototype={get:function(a,b,c){var d,e,f,g=null,h={},i=[];if(this.mergeOptions(c),this.rootID=0,!a||!b)return g=[{error:"No DOM or rootNode given"}],{errors:g,data:{}};if(this.options.includes&&this.addIncludes(a,b),e=b.querySelector("base"),e&&(f=this.domUtils.getAttribute(a,e,"href"),f&&(this.options.baseUrl=f)),this.options.filters.length>0){var j=this.findFilterNodes(a,b,this.options.filters);i=this.walkRoot(j[0],j[1])}else i=this.walkRoot(a,b);return h.items=i,this.options.rel&&(d=this.findRels(a,b),h.rels=d.rels,h["rel-urls"]=d["rel-urls"],d.alternate&&(h.alternates=d.alternate)),this.clearUpDom(a),h},findFilterNodes:function(){return[null,null]},count:function(a,b){function c(a,b){h[a]?h[a]=h[a]+b:h[a]=b}var d,e,f,g,h={};for(d=this.findRootNodes(a,b),g=d.length;g--;)for(e=this.domUtils.getAttributeList(a,d[g],"class"),f=e.length;f--;){this.utils.startWith(e[f],"h-")&&c(e[f],1);for(var i in this.maps)this.maps[i].root===e[f]&&-1===e.indexOf(i)&&c(i,1)}return h},shouldInclude:function(a,b){var c;if(this.utils.isArray(b)&&b.length>0){for(c=b.length;c--;)if(a.type[0]===b[c])return!0;return!1}return!0},findChildItems:function(a,b,c){var d,e,f,g,h,i=[],j=[];if(d=this.findRootNodes(a,b,!0),d.length>0)for(f=d.length,e=0;f>e;){var k=this.getUfClassNames(a,d[e],c);if(k.root.length>0&&0===k.properties.length)for(j=this.walkTree(a,d[e],!0),h=j.length,g=0;h>g;)j[g]&&this.utils.hasProperties(j[g].properties)&&i.push(j[g]),g++;e++}return i},findRootNodes:function(a,b,c){var d,e,f,g,h,i=null,j=[],k=[];for(h in this.maps)this.maps.hasOwnProperty(h)&&k.push(this.maps[h].root);for(c=c?c:!1,i=c?this.domUtils.getNodesByAttribute(a,b,"class"):this.domUtils.getNodesByAttribute(a,b,"class"),e=0,f=i.length;f>e;){for(d=this.domUtils.getAttributeList(a,i[e],"class"),g=d.length;g--;){if(k.indexOf(d[g])>-1){j.push(i[e]);break}if(this.utils.startWith(d[g],"h-")){j.push(i[e]);break}}e++}return j},walkRoot:function(a,b){var c,d=this,e=[],f=[];if(c=this.getUfClassNames(a,b),c&&c.root.length>0)e=this.walkTree(a,b),e.length>0&&(f=f.concat(e));else if(b&&b.children&&b.children.length>0&&this.findRootNodes(a,b,!0).length>-1)for(var g=0;g<b.children.length;g++){var h=b.children[g];e=d.walkRoot(a,h),e.length>0&&(f=f.concat(e))}return f},walkTree:function(a,b){var c,d,e,f=[];return c=this.getUfClassNames(a,b),c&&c.root.length&&c.root.length>0&&(this.rootID++,e=this.rootID,d=this.createUfObject(c.root),this.walkChildren(a,b,d,c.root,e,c),this.impliedRules(a,b,d,c),f.push(d)),f},impliedRules:function(a,b,c,d){function e(a,b){var c=l.domUtils.getAttrValFromTagList(a,b,["img","area"],"alt");return c||(c=l.domUtils.getAttrValFromTagList(a,b,["abbr"],"title")),c}function f(a,b){var c=l.domUtils.getAttrValFromTagList(a,b,["img"],"src");return c||(c=l.domUtils.getAttrValFromTagList(a,b,["object"],"data")),c}function g(a,b){var c=null;return l.domUtils.hasAttributeValue(a,b,"class","include")===!1&&(c=l.domUtils.getAttrValFromTagList(a,b,["a"],"href"),c||(c=l.domUtils.getAttrValFromTagList(a,b,["area"],"href"))),c}var h,i,j,k,l=this;if(c&&c.properties){if(!c.properties.name){h=e(a,b),h||(i=this.domUtils.isSingleDescendant(a,b,["img","area","abbr"]),i&&this.hasHClass(a,i)===!1&&(h=e(a,i)),b.children.length>0&&(j=this.domUtils.isSingleDescendant(a,b),j&&(i=this.domUtils.isSingleDescendant(a,j,["img","area","abbr"]),i&&this.hasHClass(a,i)===!1&&(h=e(a,i)))));var m=this.options.textFormat;"impliednametrimmed"===this.options.textFormat&&(m="whitespacetrimmed"),h?c.properties.name=[this.text.parseText(a,h,m)]:c.properties.name=[this.text.parse(a,b,m)]}c.properties.name&&c.value&&d.root.length>0&&1===d.properties.length&&(c=l.impliedValueRule(c,d.properties[0],"p-name",c.properties.name[0])),c.properties.photo||(h=f(a,b),h||(i=this.domUtils.isOnlySingleDescendantOfType(a,b,["img","object"]),i&&this.hasHClass(a,i)===!1&&(h=f(a,i)),b.children.length>0&&(j=this.domUtils.isSingleDescendant(a,b),j&&this.hasHClass(a,j)===!1&&(i=this.domUtils.isOnlySingleDescendantOfType(a,j,["img","object"]),i&&this.hasHClass(a,i)===!1&&(h=f(a,i))))),h&&(h&&""!==h&&""!==this.options.baseUrl&&-1===h.indexOf(":")&&(h=this.domUtils.resolveUrl(a,h,this.options.baseUrl)),c.properties.photo=[this.utils.trim(h)])),c.properties.url||(h=g(a,b),h||(i=this.domUtils.isOnlySingleDescendantOfType(a,b,["a","area"]),i&&this.hasHClass(a,i)===!1&&(h=g(a,i)),b.children.length>0&&(j=this.domUtils.isSingleDescendant(a,b),j&&this.hasHClass(a,j)===!1&&(i=this.domUtils.isOnlySingleDescendantOfType(a,j,["a","area"]),i&&this.hasHClass(a,i)===!1&&(h=g(a,i))))),h&&(h&&""!==h&&""!==this.options.baseUrl&&-1===h.indexOf(":")&&(h=this.domUtils.resolveUrl(a,h,this.options.baseUrl)),c.properties.url=[this.utils.trim(h)])),c.properties.url&&d&&1===d.root.length&&1===d.properties.length&&(c=l.impliedValueRule(c,d.properties[0],"u-url",c.properties.url[0]))}c.times.length>0&&c.dates.length>0&&(k=this.dates.dateTimeUnion(c.dates[0][1],c.times[0][1],this.options.dateFormat),c.properties[this.removePropPrefix(c.times[0][0])][0]=k.toString(this.options.dateFormat)),delete c.times,delete c.dates,null!==c.altValue&&(c.value=c.altValue.value),delete c.altValue},impliedValueRule:function(a,b,c,d){return a.value&&(this.utils.startWith(b,"p-")&&"p-name"===c&&(a.altValue={name:c,value:d}),this.utils.startWith(b,"e-")&&(a.altValue={name:c,value:d}),this.utils.startWith(b,"u-")&&(a.altValue={name:c,value:d})),a},walkChildren:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p=this;for(m=0,n=b.children.length;n>m;){o=b.children[m];var q=p.getUfClassNames(a,o,d);if(q.root.length>0&&q.properties.length>0&&!o.addedAsRoot){for(g=p.createUfObject(q.root,this.text.parse(a,o,p.options.textFormat)),f&&1===f.root.length&&1===f.properties.length&&(c=p.impliedValueRule(c,f.properties[0],q.properties[0],i)),j=p.removePropPrefix(q.properties[0]),c.properties[j]?c.properties[j].push(g):c.properties[j]=[g],p.rootID++,o.addedAsRoot=!0,l=0,k=g.type.length,h=p.rootID;k>l;)p.walkChildren(a,o,g,g.type,h,q),l++;p.impliedRules(a,o,g,q)}if(0===q.root.length&&q.properties.length>0){for(l=0,k=q.properties.length;k>l;)i=p.getValue(a,o,q.properties[l],c),j=p.removePropPrefix(q.properties[l]),f&&1===f.root.length&&1===f.properties.length&&(c=p.impliedValueRule(c,f.properties[0],q.properties[l],i)),""===i||p.hasRootID(a,o,e,j)||(c.properties[j]?c.properties[j].push(i):c.properties[j]=[i],p.appendRootID(a,o,e,j)),l++;p.walkChildren(a,o,c,d,e,q)}if(0===q.root.length&&0===q.properties.length&&p.walkChildren(a,o,c,d,e,q),p.options.children&&q.root.length>0&&0===q.properties.length){for(g=p.createUfObject(q.root,p.text.parse(a,o,p.options.textFormat)),c.children||(c.children=[]),p.hasRootID(a,o,e,"child-root")||(c.children.push(g),p.appendRootID(a,o,e,"child-root"),p.rootID++),l=0,k=g.type.length,h=p.rootID;k>l;)p.walkChildren(a,o,g,g.type,h,q),l++;p.impliedRules(a,o,g,q)}m++}},getValue:function(a,b,c,d){var e="";return this.utils.startWith(c,"p-")&&(e=this.getPValue(a,b,!0)),this.utils.startWith(c,"e-")&&(e=this.getEValue(a,b)),this.utils.startWith(c,"u-")&&(e=this.getUValue(a,b,!0)),this.utils.startWith(c,"dt-")&&(e=this.getDTValue(a,b,c,d,!0)),e},getPValue:function(a,b,c){var d="";return c&&(d=this.getValueClass(a,b,"p")),!d&&c&&(d=this.getValueTitle(a,b)),d||(d=this.domUtils.getAttrValFromTagList(a,b,["abbr"],"title")),d||(d=this.domUtils.getAttrValFromTagList(a,b,["data"],"value")),("br"===b.name||"hr"===b.name)&&(d=""),d||(d=this.domUtils.getAttrValFromTagList(a,b,["img","area"],"alt")),d||(d=this.text.parse(a,b,this.options.textFormat)),d?d:""},getEValue:function(a,b){function c(a,b,c,e){var f,g,h;for(g=d.domUtils.getNodesByAttribute(a,b,c),f=g.length;f--;)try{h=d.domUtils.getAttribute(a,g[f],c),h&&""!==h&&""!==e&&-1===h.indexOf(":")&&(h=d.domUtils.resolveUrl(a,h,e),d.domUtils.setAttribute(a,g[f],c,h))}catch(i){}}var d=this,e={value:"",html:""};return c(a,b,"src",this.options.baseUrl),c(a,b,"href",this.options.baseUrl),e.value=this.text.parse(a,b,this.options.textFormat),e.html=this.html.parse(a,b),e},getUValue:function(a,b,c){var d="";return c&&(d=this.getValueClass(a,b,"u")),!d&&c&&(d=this.getValueTitle(a,b)),d||(d=this.domUtils.getAttrValFromTagList(a,b,["a","area"],"href")),d||(d=this.domUtils.getAttrValFromTagList(a,b,["img"],"src")),d||(d=this.domUtils.getAttrValFromTagList(a,b,["object"],"data")),d&&""!==d&&-1===d.indexOf(":")&&(d=this.domUtils.resolveUrl(a,d,this.options.baseUrl)),d||(d=this.domUtils.getAttrValFromTagList(a,b,["abbr"],"title")),d||(d=this.domUtils.getAttrValFromTagList(a,b,["data"],"value")),d||(d=this.text.parse(a,b,this.options.textFormat)),d?d:""},getDTValue:function(a,b,c,d,e){var f="";return e&&(f=this.getValueClass(a,b,"dt")),!f&&e&&(f=this.getValueTitle(a,b)),f||(f=this.domUtils.getAttrValFromTagList(a,b,["time","ins","del"],"datetime")),f||(f=this.domUtils.getAttrValFromTagList(a,b,["abbr"],"title")),f||(f=this.domUtils.getAttrValFromTagList(a,b,["data"],"value")),f||(f=this.text.parse(a,b,this.options.textFormat)),f?this.dates.isDuration(f)?f:this.dates.isTime(f)?(d&&d.times.push([c,this.dates.parseAmPmTime(f,this.options.dateFormat)]),this.dates.parseAmPmTime(f,this.options.dateFormat)):(d&&d.dates.push([c,new ISODate(f).toString(this.options.dateFormat)]),new ISODate(f).toString(this.options.dateFormat)):""},appendRootID:function(a,b,c,d){if(this.hasRootID(a,b,c,d)===!1){var e=[];this.domUtils.hasAttribute(a,b,"rootids")&&(e=this.domUtils.getAttributeList(a,b,"rootids")),e.push("id"+c+"-"+d),this.domUtils.setAttribute(a,b,"rootids",e.join(" "))}},hasRootID:function(a,b,c,d){var e=[];return this.domUtils.hasAttribute(a,b,"rootids")?(e=this.domUtils.getAttributeList(a,b,"rootids"),e.indexOf("id"+c+"-"+d)>-1):!1},getValueClass:function(a,b,c){var d,e,f,g=this,h=[];for(e=0,f=b.children.length;f>e;){d=b.children[e];var i=null;if(this.domUtils.hasAttributeValue(a,d,"class","value")){switch(c){case"p":i=g.getPValue(a,d,!1);break;case"u":i=g.getUValue(a,d,!1);break;case"dt":i=g.getDTValue(a,d,"",null,!1)}i&&h.push(this.utils.trim(i))}e++}return h.length>0?"p"===c?this.text.parseText(a,h.join(" "),this.options.textFormat):"u"===c?h.join(""):"dt"===c?this.dates.concatFragments(h).toString(this.options.dateFormat):void 0:null},getValueTitle:function(a,b){var c,d,e,f=[];for(c=this.domUtils.getNodesByAttributeValue(a,b,"class","value-title"),e=0,d=c.length;d>e;)this.domUtils.hasAttribute(a,c[e],"title")&&f.push(this.domUtils.getAttribute(a,c[e],"title")),e++;return f.join("")},hasHClass:function(a,b){var c=this.getUfClassNames(a,b);return c.root&&c.root.length>0?!0:!1},getUfClassNames:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s={root:[],properties:[]};if(d=this.domUtils.getAttribute(a,b,"class"))for(f=d.split(" "),i=0,h=f.length;h>i;){for(g=r.utils.trim(f[i]),r.utils.startWith(g,r.rootPrefix)&&s.root.push(g),j=r.propertyPrefixes.length;j--;)r.utils.startWith(g,r.propertyPrefixes[j])&&s.properties.push(g);if(r.options.version1){for(e in r.maps)r.maps.hasOwnProperty(e)&&r.maps[e].root===g&&-1===s.root.indexOf(e)&&(r.maps[e].subTree&&r.isSubTreeRoot(a,b,r.maps[e],f)===!1?s.properties.push("p-"+r.maps[e].root):s.root.push(e));if(c)for(var t=0;t<c.length;t++)if(q=c[t],l=r.getMapping(q))for(e in l.properties)if(l.properties.hasOwnProperty(e)&&(m=l.properties[e],n=m.map?m.map:"p-"+e,e===g))if(m.uf){for(k=0;h>k;)o=r.getV2RootName(f[k]),m.uf.indexOf(o)>-1&&-1===s.root.indexOf(o)&&s.root.push(o),k++;-1===s.properties.indexOf(n)&&s.properties.push(n)}else-1===s.properties.indexOf(n)&&s.properties.push(n)}i++}if(c)for(var u=0;u<c.length;u++)q=c[u],p=this.findRelImpied(a,b,q),p&&-1===s.properties.indexOf(p)&&s.properties.push(p);return s},getMapping:function(a){var b;for(b in this.maps)if(this.maps[b].root===a||b===a)return this.maps[b];return null},getV2RootName:function(a){var b;for(b in this.maps)if(this.maps[b].root===a)return b;return null},isSubTreeRoot:function(a,b,c,d){var e,f,g,h;for(e=this.createUfObject(c.name),f=!1,h=0,g=d.length;g>h;){var i=this.utils.trim(d[h]);for(var j in this.maps)if(this.maps.hasOwnProperty(j)&&this.maps[j].root===i&&this.maps[j].root!==c.root){f=!0;break}h++}return this.walkChildren(a,b,e,c.name,null,null),this.utils.hasProperties(e.properties)&&f===!1?!0:!1},findRelImpied:function(a,b,c){var d,e,f;if(e=this.getMapping(c))for(var g in e.properties)if(e.properties.hasOwnProperty(g)){var h=e.properties[g],i=h.map?h.map:"p-"+g,j=0;if(h.relAlt&&this.domUtils.hasAttribute(a,b,"rel")){for(f=h.relAlt.length;f--;)this.domUtils.hasAttributeValue(a,b,"rel",h.relAlt[f])&&j++;j===h.relAlt.length&&(d=i)}}return d},createUfObject:function(a,b){var c={};return b&&this.utils.isOnlyWhiteSpace(b)===!1&&(c.value=b),this.utils.isArray(a)?c.type=a:c.type=[a],c.properties={},c.times=[],c.dates=[],c.altValue=null,c},removePropPrefix:function(a){var b;for(b=this.propertyPrefixes.length;b--;){var c=this.propertyPrefixes[b];this.utils.startWith(a,c)&&(a=a.substr(c.length))}return a},findRels:function(a,b,c){var d,e,f,g,h,i,j,k,l,m={items:[],rels:{},"rel-urls":{}};for(c=c?c:!1,l=c?this.domUtils.getNodesByAttribute(a,b.children,"rel"):this.domUtils.getNodesByAttribute(a,b,"rel"),d=0,e=l.length;e>d;){if(h=this.domUtils.getAttribute(a,l[d],"rel")){for(i=h.split(" "),g=0,f=i.length;f>g;){if(j=this.utils.trim(i[g]),k=this.domUtils.getAttrValFromTagList(a,l[d],["a","area"],"href"),k||(k=this.domUtils.getAttrValFromTagList(a,l[d],["link"],"href")),m.rels[j]||(m.rels[j]=[]),"string"==typeof this.options.baseUrl&&"string"==typeof k){var n=this.domUtils.resolveUrl(a,k,this.options.baseUrl);-1===m.rels[j].indexOf(n)&&m.rels[j].push(n)}g++}var o=null;this.domUtils.hasAttribute(a,l[d],"href")&&(o=this.domUtils.getAttribute(a,l[d],"href"),o&&(o=this.domUtils.resolveUrl(a,o,this.options.baseUrl)));var p=this.getRelProperties(a,l[d]);if(p.rels=i,o&&void 0===m["rel-urls"][o]&&(m["rel-urls"][o]=p),h.toLowerCase().indexOf("alternate")>-1){var q=this.getRelProperties(a,l[d]);if(o&&(q.url=o),i.length>1&&this.domUtils.hasAttribute(a,l[d],"rel")){var r=h;q.rel=this.utils.trim(r.toLowerCase().replace("alternate",""))}m.alternate||(m.alternate=[]),m.alternate.push(q)}}d++}return m},getRelProperties:function(a,b){var c={};return this.domUtils.hasAttribute(a,b,"media")&&(c.media=this.domUtils.getAttribute(a,b,"media")),this.domUtils.hasAttribute(a,b,"type")&&(c.type=this.domUtils.getAttribute(a,b,"type")),this.domUtils.hasAttribute(a,b,"hreflang")&&(c.hreflang=this.domUtils.getAttribute(a,b,"hreflang")),this.domUtils.hasAttribute(a,b,"title")&&(c.title=this.domUtils.getAttribute(a,b,"title")),""!==this.utils.trim(this.getPValue(a,b,!1))&&(c.text=this.getPValue(a,b,!1)),c},addIncludes:function(a,b){this.addAttributeIncludes(a,b,"itemref"),this.addAttributeIncludes(a,b,"headers"),this.addClassIncludes(a,b)},addAttributeIncludes:function(a,b,c){var d,e,f,g,h,i;for(d=this.domUtils.getNodesByAttribute(a,b,c),g=0,f=d.length;f>g;){if(e=this.domUtils.getAttributeList(a,d[g],c))for(h=0,i=e.length;i>h;)this.apppendInclude(a,d[g],e[h]),h++;g++}},addClassIncludes:function(a,b){var c,d,e,f=0;for(d=this.domUtils.getNodesByAttributeValue(a,b,"class","include"),e=d.length;e>f;)c=this.domUtils.getAttrValFromTagList(a,d[f],["a"],"href"),c||(c=this.domUtils.getAttrValFromTagList(a,d[f],["object"],"data")),this.apppendInclude(a,d[f],c),f++},apppendInclude:function(a,b,c){var d,e;c=this.utils.trim(c.replace("#","")),d=a.getElementById(c),null===d&&(d=this.options.node.querySelector("#"+c)),d&&(e=this.domUtils.clone(a,d),this.markIncludeChildren(a,e),this.domUtils.appendChild(a,b,e))},markIncludeChildren:function(a,b){var c,d,e;for(c=this.findRootNodes(a,b),d=0,e=c.length,this.domUtils.setAttribute(a,b,"data-include","true"),this.domUtils.setAttribute(a,b,"style","display:none");e>d;)this.domUtils.setAttribute(a,c[d],"data-include","true"),d++},expandURLs:function(a,b,c){function d(b,d){if(b&&b.length)for(var f=b.length;f--;){var g=b[f].getAttribute(d);0!==g.toLowerCase().indexOf("http")&&b[f].setAttribute(d,e.domUtils.resolveUrl(a,g,c))}}var e=this;return b=this.domUtils.clone(a,b),d(this.domUtils.getNodesByAttribute(a,b,"href"),"href"),d(this.domUtils.getNodesByAttribute(a,b,"src"),"src"),b},mergeOptions:function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b])},clearUpDom:function(a){var b,c;for(b=this.domUtils.getNodesByAttribute(a,a,"data-include"),c=b.length;c--;)this.domUtils.removeChild(a,b[c]);for(b=this.domUtils.getNodesByAttribute(a,a,"rootids"),c=b.length;c--;)this.domUtils.removeAttribute(a,b[c],"rootids")}},microformats.parser=new microformats.Parser,microformats.getItems=function(a){var b,c;return b=a&&a.document?a.document:document,c=a&&a.node?a.node:b,a=a?a:{},!a.baseUrl&&b&&b.location&&(a.baseUrl=b.location.href),this.parser.get(b,c,a)},microformats.getCounts=function(a){var b,c;return b=a&&a.document?a.document:document,c=a&&a.node?a.node:b,a=a?a:{},this.parser.count(b,c,a)},"undefined"!=typeof exports&&(exports.microformats=microformats),microformats.parser.utils={isString:function(a){return"string"==typeof a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},startWith:function(a,b){return 0===a.indexOf(b)},trim:function(a){return a&&this.isString(a)?a.replace(/^\s+|\s+$/g,""):""},replaceCharAt:function(a,b,c){return a&&a.length>b?a.substr(0,b)+c+a.substr(b+c.length):a},trimWhitespace:function(a){if(a&&a.length){for(var b=a.length,c=0;b--&&this.isOnlyWhiteSpace(a[b]);)a=this.replaceCharAt(a,b," ");for(b=a.length;b>c&&this.isOnlyWhiteSpace(a[c]);)a=this.replaceCharAt(a,b," "),c++}return this.trim(a)},isOnlyWhiteSpace:function(a){return!/[^\t\n\r ]/.test(a)},removeWhiteSpace:function(a){return a.replace(/[\t\n\r ]+/g," ")},isArray:function(a){return a&&!a.propertyIsEnumerable("length")&&"object"==typeof a&&"number"==typeof a.length},hasProperties:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1},sortObjects:function(a,b){return b=b?-1:1,function(c,d){return c=c[a],d=d[a],d>c?-1*b:c>d?1*b:0}}},function(a){var b,c,d,e,f;if(a){try{d=!!(new a).parseFromString("","text/html")}catch(g){d=!1}if(!d){try{var h=document.implementation.createHTMLDocument("");h.documentElement.innerHTML="<title></title><div></div>",f=!0}catch(g){f=!1}if(!f)try{e=!!(new a).parseFromString("","text/xml")}catch(g){d=!1}a.prototype&&(f||e)&&(b=a.prototype,c=b.parseFromString,b.parseFromString=function(b,d){if(/^\s*text\/html\s*(?:;|$)/i.test(d)){var g,h,i;return f?(g=document.implementation.createHTMLDocument(""),h=g.documentElement,h.innerHTML=b,i=h.firstElementChild):e&&(/^<html.*html>$/i.test(b)||(b="<html>"+b+"</html>"),g=(new a).parseFromString(b,"text/xml"),h=g.documentElement,i=h.firstElementChild),1===h.childElementCount&&"html"===i.localName.toLowerCase()&&g.replaceChild(i,h),g}return c.apply(this,arguments)})}}}(DOMParser),microformats.parser.domUtils={utils:microformats.parser.utils,innerHTML:function(a,b){return b.innerHTML},hasAttribute:function(a,b,c){return b.attributes[c]?!0:!1},getAttribute:function(a,b,c){return b.getAttribute(c)},setAttribute:function(a,b,c,d){b.setAttribute(c,d)},removeAttribute:function(a,b,c){b.removeAttribute(c)},getAttributeList:function(a,b,c){var d,e=[];return d=b.getAttribute(c),d&&""!==d&&(d.indexOf(" ")>-1?e=d.split(" "):e.push(d)),e},hasAttributeValue:function(a,b,c,d){var e=this.getAttributeList(a,b,c);return e.indexOf(d)>-1},getNodesByAttribute:function(a,b,c){var d="["+c+"]";return b.querySelectorAll(d)},getNodesByAttributeValue:function(a,b,c,d){var e,f=[],g=0,h=[];if(f=this.getNodesByAttribute(a,b,c))for(e=f.length;e>g;)this.hasAttributeValue(a,f[g],c,d)&&h.push(f[g]),g++;return h},getAttrValFromTagList:function(a,b,c,d){for(var e=c.length;e--;)if(b.tagName.toLowerCase()===c[e]){var f=this.getAttribute(a,b,d);if(f&&""!==f)return f}return null},isSingleDescendant:function(a,b,c){var d,e,f,g=0,h=null;for(e=0,f=b.children.length;f>e;)d=b.children[e],d.tagName&&(c&&this.hasTagName(d,c)&&(h=d),g++),e++;return 1===g&&h?h:null},isOnlySingleDescendantOfType:function(a,b,c){for(var d,e=b.children.length,f=0,g=null;e--;)d=b.children[e],1===d.nodeType&&this.hasTagName(d,c)&&(g=d,f++);return 1===f&&g?g:null},hasTagName:function(a,b){for(var c=b.length;c--;)if(a.tagName.toLowerCase()===b[c])return!0;return!1},appendChild:function(a,b,c){b.appendChild(c)},removeChild:function(a,b){b.parentNode&&b.parentNode.removeChild(b)},clone:function(a,b){var c=b.cloneNode(!0);return c.removeAttribute("id"),c},resolveUrl:function(a,b,c){if(b&&""!==b&&-1===b.indexOf(":")){var d=new DOMParser,e=d.parseFromString('<html><head><base href="'+c+'"><head><body><a href="'+b+'"></a></body></html>',"text/html");return e.getElementsByTagName("a")[0].href}return b},getElementText:function(a){return a&&a.data?a.data:""},getOrderedAttributes:function(a){for(var b=a.outerHTML,c=[],d=0;d<a.attributes.length;d++){var e=a.attributes[d];e.indexNum=b.indexOf(e.name),c.push(e)}return c.sort(this.utils.sortObjects("indexNum"))},decodeEntities:function(a,b){return a.createTextNode(b).nodeValue}},ISODate.prototype={clear:function(){this.clearDate(),this.clearTime(),this.clearTimeZone(),this.setAutoProfileState()},clearDate:function(){this.dY=-1,this.dM=-1,this.dD=-1,this.dDDD=-1},clearTime:function(){this.tH=-1,this.tM=-1,this.tS=-1,this.tD=-1},clearTimeZone:function(){this.tzH=-1,this.tzM=-1,this.tzPN="+",this.z=!1},setAutoProfileState:function(){this.autoProfile={sep:"T",dsep:"-",tsep:":",tzsep:":",tzZulu:"Z"}},parse:function(a,b){this.clear();var c=[],d=[],e=0,f="",g="",h="";return b&&(this.format=b),a.indexOf("t")>-1&&(this.autoProfile.sep="t"),a.indexOf("z")>-1&&(this.autoProfile.tzZulu="z"),a.indexOf("Z")>-1&&(this.autoProfile.tzZulu="Z"),-1===a.toUpperCase().indexOf("T")&&(this.autoProfile.sep=" "),a=a.toUpperCase().replace(" ","T"),a.indexOf("T")>-1?(c=a.split("T"),f=c[0],g=c[1],g.indexOf("Z")>-1&&(this.z=!0),(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(d=g.split("Z"),g=d[0],h=d[1],(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(e=0,e=g.indexOf("+")>-1?g.indexOf("+"):g.indexOf("-"),h=g.substring(e,g.length),g=g.substring(0,e)))):f=a,""!==f&&(this.parseDate(f),""!==g&&(this.parseTime(g),""!==h&&this.parseTimeZone(h))),this.toString(b)},parseDate:function(a,b){this.clearDate();var c=[];return-1===a.indexOf("-")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d\d\d)-(\d\d\d)/),c&&(c[1]&&(this.dY=c[1]),c[2]&&(this.dDDD=c[2])),-1===this.dDDD&&(c=a.match(/(\d\d\d\d)?-?(\d\d)?-?(\d\d)?/),c[1]&&(this.dY=c[1]),c[2]&&(this.dM=c[2]),c[3]&&(this.dD=c[3])),this.toString(b)},parseTime:function(a,b){this.clearTime();var c=[];return-1===a.indexOf(":")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d)?:?(\d\d)?:?(\d\d)?.?([0-9]+)?/),c[1]&&(this.tH=c[1]),c[2]&&(this.tM=c[2]),c[3]&&(this.tS=c[3]),c[4]&&(this.tD=c[4]),this.toTimeString(b)},parseTimeZone:function(a,b){this.clearTimeZone();var c=[];return"z"===a.toLowerCase()?(this.z=!0,this.autoProfile.tzZulu="z"===a?"z":"Z"):(-1===a.indexOf(":")&&(this.autoProfile.tzsep=""),c=a.match(/([\-\+]{1})?(\d\d)?:?(\d\d)?/),c[1]&&(this.tzPN=c[1]),c[2]&&(this.tzH=c[2]),c[3]&&(this.tzM=c[3])),this.tzZulu="z",this.toTimeString(b)},toString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.dY>-1?(b=this.dY,this.dM>0&&this.dM<13&&(b+=this.dsep+this.dM,this.dD>0&&this.dD<32&&(b+=this.dsep+this.dD,this.tH>-1&&this.tH<25&&(b+=this.sep+this.toTimeString(a)))),this.dDDD>-1&&(b+=this.dsep+this.dDDD)):this.tH>-1&&(b+=this.toTimeString(a)),b},toTimeString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.tH&&this.tH>-1&&this.tH<25&&(b+=this.tH,this.tM>-1&&this.tM<61&&(b+=this.tsep+this.tM,this.tS>-1&&this.tS<61&&(b+=this.tsep+this.tS,this.tD>-1&&(b+="."+this.tD))),this.z?b+=this.tzZulu:this.tzH&&this.tzH>-1&&this.tzH<25&&(b+=this.tzPN+this.tzH,this.tzM>-1&&this.tzM<61&&(b+=this.tzsep+this.tzM))),b},setFormatSep:function(){switch(this.format.toLowerCase()){case"rfc3339":this.sep="T",this.dsep="",this.tsep="",this.tzsep="",this.tzZulu="Z";break;case"w3c":this.sep="T",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;case"html5":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;default:this.sep=this.autoProfile.sep,this.dsep=this.autoProfile.dsep,this.tsep=this.autoProfile.tsep,this.tzsep=this.autoProfile.tzsep,this.tzZulu=this.autoProfile.tzZulu}},hasFullDate:function(){return-1!==this.dY&&-1!==this.dM&&-1!==this.dD},hasDate:function(){return-1!==this.dY},hasTime:function(){return-1!==this.tH},hasTimeZone:function(){return-1!==this.tzH}},microformats.parser.dates={utils:microformats.parser.utils,hasAM:function(a){return a=a.toLowerCase(),a.indexOf("am")>-1||a.indexOf("a.m.")>-1},hasPM:function(a){return a=a.toLowerCase(),a.indexOf("pm")>-1||a.indexOf("p.m.")>-1},removeAMPM:function(a){return a.replace("pm","").replace("p.m.","").replace("am","").replace("a.m.","")},isDuration:function(a){return this.utils.isString(a)&&(a=a.toLowerCase(),this.utils.startWith(a,"p"))?!0:!1},isTime:function(a){if(this.utils.isString(a)){if(a=a.toLowerCase(),a=this.utils.trim(a),a.match(":")&&(this.utils.startWith(a,"z")||this.utils.startWith(a,"-")||this.utils.startWith(a,"+")))return!0;if(a.match(/^[0-9]/)&&(this.hasAM(a)||this.hasPM(a)))return!0;if(a.match(":")&&!a.match(/t|\s/))return!0;if(this.utils.isNumber(a)&&(2===a.length||4===a.length||6===a.length))return!0}return!1},parseAmPmTime:function(a){var b=a,c=[];return this.utils.isString(b)&&(a=a.toLowerCase(),a=a.replace(/[ ]+/g,""),(a.match(":")||this.hasAM(a)||this.hasPM(a))&&(a.match(":")?c=a.split(":"):(c[0]=a,c[0]=this.removeAMPM(c[0])),this.hasPM(a)&&c[0]<12&&(c[0]=parseInt(c[0],10)+12),c[0]&&1===c[0].length&&(c[0]="0"+c[0]),c[0]&&(a=c.join(":")))),this.removeAMPM(a)},dateTimeUnion:function(a,b,c){var d=new ISODate(a,c),e=new ISODate;return e.parseTime(this.parseAmPmTime(b)),d.hasFullDate()&&e.hasTime()?(d.tH=e.tH,d.tM=e.tM,d.tS=e.tS,d.tD=e.tD,d):d.hasFullDate()?d:new ISODate},concatFragments:function(a,b){var c=new ISODate,d=0,e="";if(a[0].toUpperCase().match("T"))return new ISODate(a[0],b);for(d=0;d<a.length;d++){if(e=a[d],"-"===e.charAt(4)&&c.hasFullDate()===!1&&c.parseDate(e),(e.indexOf(":")>-1||this.utils.isNumber(this.parseAmPmTime(e)))&&c.hasTime()===!1){var f=this.splitTimeAndZone(e);e=f[0],e=this.parseAmPmTime(e),c.parseTime(e),f.length>1&&c.parseTimeZone(f[1])}("-"===e.charAt(0)||"+"===e.charAt(0)||"Z"===e.toUpperCase())&&c.hasTimeZone()===!1&&c.parseTimeZone(e)}return c},splitTimeAndZone:function(a){for(var b=[a],c=["-","+","z","Z"],d=c.length;d--;)if(a.indexOf(c[d])>-1){b[0]=a.slice(0,a.indexOf(c[d])),b.push(a.slice(a.indexOf(c[d])));break}return b}},Text.prototype={utils:microformats.parser.utils,domUtils:microformats.parser.domUtils,parse:function(a,b,c){var d;return this.textFormat=c?c:this.textFormat,"normalised"===this.textFormat?(d=this.walkTreeForText(b),void 0!==d?this.normalise(a,d):""):this.textContent(a,b.textContent,this.textFormat)},parseText:function(a,b,c){var d=document.createElement("div");return d.innerHTML=b,this.parse(a,d,c)},textContent:function(a,b,c){if(this.textFormat=c?c:this.textFormat,b){var d="",e=/(<([^>]+)>)/gi;return d=b.replace(e,""),"whitespacetrimmed"===this.textFormat&&(d=this.utils.trimWhitespace(d)),this.domUtils.decodeEntities(a,d)}return""},normalise:function(a,b){return b=b.replace(/&nbsp;/g," "),b=this.utils.removeWhiteSpace(b),b=this.domUtils.decodeEntities(a,b),b=b.replace("–","-"),this.utils.trim(b)},walkTreeForText:function(a){var b="",c=0;if(a.tagName&&this.excludeTags.indexOf(a.tagName.toLowerCase())>-1)return b;if(a.nodeType&&3===a.nodeType&&(b+=this.domUtils.getElementText(a)),a.childNodes&&a.childNodes.length>0)for(c=0;c<a.childNodes.length;c++){var d=this.walkTreeForText(a.childNodes[c]);void 0!==d&&(b+=d)}return a.tagName&&-1!==this.blockLevelTags.indexOf(a.tagName.toLowerCase())&&(b+=" "),""===b?void 0:b}},microformats.parser.text=new Text,Html.prototype={utils:microformats.parser.utils,domUtils:microformats.parser.domUtils,parse:function(a,b){var c="",d=0;if(b.childNodes&&b.childNodes.length>0)for(d=0;d<b.childNodes.length;d++){var e=this.walkTreeForHtml(a,b.childNodes[d]);void 0!==e&&(c+=e)}return c},walkTreeForHtml:function(a,b){var c="",d=0;if(b.nodeType&&3===b.nodeType&&(c+=this.domUtils.getElementText(b)),b.nodeType&&1===b.nodeType&&this.domUtils.hasAttribute(a,b,"data-include")===!1){c+="<"+b.tagName.toLowerCase();var e=this.domUtils.getOrderedAttributes(b);for(d=0;d<e.length;d++)c+=" "+e[d].name+'="'+e[d].value+'"';if(-1===this.voidElt.indexOf(b.tagName.toLowerCase())&&(c+=">"),b.childNodes&&b.childNodes.length>0)for(d=0;d<b.childNodes.length;d++){var f=this.walkTreeForHtml(a,b.childNodes[d]);void 0!==f&&(c+=f)}c+=this.voidElt.indexOf(b.tagName.toLowerCase())>-1?" />":"</"+b.tagName.toLowerCase()+">"}return""===c?void 0:c}},microformats.parser.html=new Html,microformats.parser.maps["h-adr"]={root:"adr",name:"h-adr",properties:{"post-office-box":{},"street-address":{},"extended-address":{},locality:{},region:{},"postal-code":{},"country-name":{}}},microformats.parser.maps["h-card"]={root:"vcard",name:"h-card",properties:{fn:{map:"p-name"},adr:{uf:["h-adr"]},agent:{uf:["h-card"]},bday:{map:"dt-bday"},"class":{},category:{map:"p-category",relAlt:["tag"]},email:{map:"u-email"},geo:{map:"p-geo",uf:["h-geo"]},key:{},label:{},logo:{map:"u-logo"},mailer:{},"honorific-prefix":{},"given-name":{},"additional-name":{},"family-name":{},"honorific-suffix":{},nickname:{},note:{},org:{},"p-organization-name":{},"p-organization-unit":{},photo:{map:"u-photo"},rev:{map:"dt-rev"},role:{},sequence:{},"sort-string":{},sound:{map:"u-sound"},title:{},tel:{},tz:{},uid:{map:"u-uid"},url:{map:"u-url"}}},microformats.parser.maps["h-entry"]={root:"hentry",name:"h-entry",properties:{"entry-title":{map:"p-name"},"entry-summary":{map:"p-summary"},"entry-content":{map:"e-content"},published:{map:"dt-published"},updated:{map:"dt-updated"},author:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},geo:{map:"p-geo",uf:["h-geo"]},latitude:{},longitude:{},url:{map:"u-url",relAlt:["bookmark"]}}},microformats.parser.maps["h-event"]={root:"vevent",name:"h-event",properties:{summary:{map:"p-name"},dtstart:{map:"dt-start"},dtend:{map:"dt-end"},description:{},url:{map:"u-url"},category:{map:"p-category",relAlt:["tag"]},location:{uf:["h-card"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},duration:{map:"dt-duration"},contact:{uf:["h-card"]},organizer:{uf:["h-card"]},attendee:{uf:["h-card"]},uid:{map:"u-uid"},attach:{map:"u-attach"},status:{},rdate:{},rrule:{}}},microformats.parser.maps["h-geo"]={root:"geo",name:"h-geo",properties:{latitude:{},longitude:{}}},microformats.parser.maps["h-item"]={root:"item",name:"h-item",subTree:!1,properties:{fn:{map:"p-name"},url:{map:"u-url"},photo:{map:"u-photo"}}},microformats.parser.maps["h-listing"]={root:"hlisting",name:"h-listing",properties:{version:{},lister:{uf:["h-card"]},dtlisted:{map:"dt-listed"},dtexpired:{map:"dt-expired"},location:{},price:{},item:{uf:["h-card","a-adr","h-geo"]},summary:{map:"p-name"
},description:{map:"e-description"},listing:{}}},microformats.parser.maps["h-news"]={root:"hnews",name:"h-news",properties:{entry:{uf:["h-entry"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},"source-org":{uf:["h-card"]},dateline:{uf:["h-card"]},"item-license":{map:"u-item-license"},principles:{map:"u-principles",relAlt:["principles"]}}},microformats.parser.maps["h-org"]={root:"h-x-org",name:"h-org",properties:{"organization-name":{},"organization-unit":{}}},microformats.parser.maps["h-product"]={root:"hproduct",name:"h-product",properties:{brand:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},price:{},description:{map:"e-description"},fn:{map:"p-name"},photo:{map:"u-photo"},url:{map:"u-url"},review:{uf:["h-review","h-review-aggregate"]},listing:{uf:["h-listing"]},identifier:{map:"u-identifier"}}},microformats.parser.maps["h-recipe"]={root:"hrecipe",name:"h-recipe",properties:{fn:{map:"p-name"},ingredient:{map:"e-ingredient"},"yield":{},instructions:{map:"e-instructions"},duration:{map:"dt-duration"},photo:{map:"u-photo"},summary:{},author:{uf:["h-card"]},published:{map:"dt-published"},nutrition:{},tag:{}}},microformats.parser.maps["h-resume"]={root:"hresume",name:"h-resume",properties:{summary:{},contact:{uf:["h-card"]},education:{uf:["h-card","h-event"]},experience:{uf:["h-card","h-event"]},skill:{},affiliation:{uf:["h-card"]}}},microformats.parser.maps["h-review-aggregate"]={root:"hreview-aggregate",name:"h-review-aggregate",properties:{summary:{map:"p-name"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},rating:{},average:{},best:{},worst:{},count:{},votes:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},microformats.parser.maps["h-review"]={root:"hreview",name:"h-review",properties:{summary:{map:"p-name"},description:{map:"e-description"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},reviewer:{uf:["h-card"]},dtreviewer:{map:"dt-reviewer"},rating:{},best:{},worst:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},microformats.parser.rels={friend:["yes","external"],acquaintance:["yes","external"],contact:["yes","external"],met:["yes","external"],"co-worker":["yes","external"],colleague:["yes","external"],"co-resident":["yes","external"],neighbor:["yes","external"],child:["yes","external"],parent:["yes","external"],sibling:["yes","external"],spouse:["yes","external"],kin:["yes","external"],muse:["yes","external"],crush:["yes","external"],date:["yes","external"],sweetheart:["yes","external"],me:["yes","external"],license:["yes","yes"],nofollow:["no","external"],tag:["no","yes"],self:["no","external"],bookmark:["no","external"],author:["no","external"],home:["no","external"],directory:["no","external"],enclosure:["no","external"],pronunciation:["no","external"],payment:["no","external"],principles:["no","external"]};
//# sourceMappingURL=microformat-shiv.min.js.map